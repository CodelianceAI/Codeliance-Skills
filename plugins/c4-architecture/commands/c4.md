---
description: Analyse a codebase and generate a C4 architecture model in Structurizr DSL
argument-hint: [update|full]
---

Analyse the current project and generate a C4 architecture model by following the c4-architecture skill instructions. The primary output is `architecture/workspace.dsl`.

**Modes:**

- **`/c4`** or **`/c4 full`** — scan the entire codebase and generate a complete workspace from scratch.
- **`/c4 update`** — read the existing `architecture/workspace.dsl`, diff against the current codebase, and update only what changed. Follow the "Update Workflow" section in the skill instructions.

**Source traceability:** Components include `source` properties linking to the code they represent. A validation script checks that local source paths exist and, for Python files, that `::Symbol` references resolve in the AST:

```bash
bash <skill-plugin-dir>/scripts/check-sources.sh architecture/workspace.dsl
bash <skill-plugin-dir>/scripts/check-sources.sh --no-ast architecture/workspace.dsl  # skip AST checks
```

**Rendering:** After generating the DSL, offer to render SVG diagrams with drill-down links using the bundled script:

```bash
bash <skill-plugin-dir>/scripts/render.sh architecture/workspace.dsl architecture/.diagrams
```

Requires `structurizr-cli` and `plantuml` (`brew install structurizr-cli plantuml`).
